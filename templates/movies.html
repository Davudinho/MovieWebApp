{% extends "base.html" %}

{% block title %}{{ user.name }}s Filme - MovieWebApp{% endblock %}

{% block content %}
<div class="movies-section">
    <h1>ğŸ¬ {{ user.name }}s Lieblingsfilme</h1>
    
    <a href="{{ url_for('index') }}" class="btn btn-back">â† ZurÃ¼ck zur Nutzerliste</a>

    <!-- Liste der Filme -->
    {% if movies %}
    <div class="movie-grid">
        {% for movie in movies %}
        <div class="movie-card">
            {% if movie.poster_url %}
            <img src="{{ movie.poster_url }}" alt="{{ movie.name }} Poster" class="movie-poster">
            {% else %}
            <div class="movie-poster-placeholder">ğŸ¬</div>
            {% endif %}
            
            <div class="movie-info">
                <h3>{{ movie.name }}</h3>
                {% if movie.director %}
                <p><strong>Regisseur:</strong> {{ movie.director }}</p>
                {% endif %}
                {% if movie.year %}
                <p><strong>Jahr:</strong> {{ movie.year }}</p>
                {% endif %}
            </div>

            <div class="movie-actions">
                <!-- Film bearbeiten -->
                <form action="{{ url_for('update_movie', user_id=user.id, movie_id=movie.id) }}" method="post" class="inline-form">
                    <input type="text" name="title" placeholder="Neuer Titel" required>
                    <button type="submit" class="btn btn-edit">âœï¸ Bearbeiten</button>
                </form>

                <!-- Film lÃ¶schen -->
                <form action="{{ url_for('delete_movie', user_id=user.id, movie_id=movie.id) }}" method="post" class="inline-form">
                    <button type="submit" class="btn btn-delete" onclick="return confirm('Film wirklich lÃ¶schen?')">ğŸ—‘ï¸ LÃ¶schen</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="no-movies">Noch keine Filme hinzugefÃ¼gt.</p>
    {% endif %}

    <!-- Formular zum HinzufÃ¼gen neuer Filme -->
    <div class="add-movie-section">
        <h2>â• Neuen Film hinzufÃ¼gen</h2>
        <form action="{{ url_for('add_movie', user_id=user.id) }}" method="post">
            <input type="text" name="title" placeholder="Filmtitel eingeben" required>
            <button type="submit" class="btn btn-primary">Film hinzufÃ¼gen</button>
        </form>
        <p class="hint">ğŸ’¡ Tipp: Die Film-Informationen werden automatisch von OMDb abgerufen!</p>
    </div>
</div>
{% endblock %}
